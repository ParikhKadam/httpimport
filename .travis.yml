language: python
python:
  - 2.7.13
  - 3.4
  - 3.7
  # PyPy versions
  - pypy   # PyPy2 5.8
  - pypy3  # Pypy3 5.8
#matrix:
#  include:
#    - python: 2.7
#      env: JYTHON=org.python:jython-standalone:2.7.1
     
  include:
    - python: 2.7
    mono: 5.4.1
    env: IRONPYTHON=github.com:ironpython2:2.7.9
      
before_install:
# Use the Jython standalone - 2.7.1 (supported)
  - export JYTHON_URL='http://search.maven.org/remotecontent?filepath=org/python/jython-standalone/2.7.1/jython-standalone-2.7.1.jar'
  - if [ -n "$JYTHON" ]; then wget $JYTHON_URL -O jython.jar; fi

# Use the Ubuntu Xenial's Repository version of Jython - 2.5.3 (non supported)
#   - if [ -n "$JYTHON" ]; then sudo apt-get install jython; fi

# Use the IronPython Debian package - 2.7.9 (supported)
# Installing Dependencies too
  - export IRONPYTHON_URL='https://github.com/IronLanguages/ironpython2/releases/download/ipy-2.7.9/ironpython_2.7.9.zip'
  - if [ -n "$IRONPYTHON" ]; then sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF; fi
  - if [ -n "$IRONPYTHON" ]; then sudo apt install apt-transport-https ca-certificates; fi
  - if [ -n "$IRONPYTHON" ]; then echo "deb https://download.mono-project.com/repo/ubuntu stable-xenial main" | sudo tee /etc/apt/sources.list.d/mono-official-stable.list; fi
  - if [ -n "$IRONPYTHON" ]; then sudo apt update; fi
  - if [ -n "$IRONPYTHON" ]; then sudo apt install mono-devel; fi
  - if [ -n "$IRONPYTHON" ]; then wget $IRONPYTHON_URL -O ironpython2.zip; unzip ironpython2.zip; export PYTHON_EXE="mono net45/ipy.exe" fi


before_script: if [ -n "$JYTHON" ]; then export PYTHON_EXE="java -jar jython.jar "; "$PYTHON_EXE" -c "print ''"; else export PYTHON_EXE=python; fi; echo "Using-> '$PYTHON_EXE'"
install:
#  - pip install -r requirements.txt

# command to run tests
script: $PYTHON_EXE -m unittest test



branches:
  only:
    - tests
    - ironpython-travis

# after_success:
#   - codecov # submit coverage
